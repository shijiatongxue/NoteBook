# 拆箱转换

把对象转为基本类型。

遵循“先拆箱再转换”的规则，即通过拆箱转换，把对象变成基本类型，再从基本类型转换为对应的String或Number（调用toString()或valueOf()）。

```js
let o = {
  valueOf: () => {console.log("valueOf"); return {}},
  toString: () => {console.log("toString"); return {}}
}

o * 2;
// valueOf
// toString
// TypeError
```

```js
let o = {
  valueOf: () => {console.log("valueOf"); return {}},
  toString: () => {console.log("toString"); return {}}
}

String(o);
// toString
// valueOf
// TypeError
```

ES6的Symbol.toPrimitive，它会覆盖原有行为：

```js
let o = {
  valueOf: () => {console.log("valueOf"); return {}},
  toString: () => {console.log("toString"); return {}}
}

o[Symbol.toPrimitive] = () => {console.log("toPrimitive"); return "hello"};

console.log(o + "");
// toPrimitive
// hello
```



参考：

重学前端