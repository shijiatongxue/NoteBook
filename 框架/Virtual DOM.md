# Virtual DOM

## 什么是虚拟DOM

通过状态生成一个虚拟节点树，然后使用虚拟节点树进行渲染。在渲染之前，会使用新生成的虚拟节点树和上一次生成的虚拟节点树进行对比，只渲染不同的部分。

虚拟节点树其实是由组件树建立起来的整个虚拟节点（`vnode`）树。

## 为什么要引入虚拟DOM

`Vue.js2.0`开始选择了一个中等粒度的解决方案吗，那就是引入了虚拟DOM。组件级别是一个`watcher`实例，就是说即便一个组件内有10个节点使用了某个状态，但其实也只有一个`watcher`在观察这个状态的变化。所以当这个状态发生变化时，只能通知到组件，然后组件内部通过虚拟DOM去对比与渲染。

`Vue.js1.0`在状态变化时，不需要对比可以直接对相应节点进行更新操作。但是，因为粒度太细，就会有很多watcher同时观察某些状态，会有一些内存开销以及一些依赖追踪的开销。

> Vue.js2.0使用了组件级别粒度，大大缩减了依赖数量和watcher数量。

---

参考：深入浅出Vue.js