# 概述
模块加载有四种规范：
- AMD
- CMD
- CommonJS
- ES6

# require.js
require是模块化的工具，会自动加载依赖的模块。

工程目录：
- Project
  - index.html
  - scripts/
    - main.js
    - require.js
    - add.js

具体内容：
- 配置html文件
```html
<script data-main="scripts/main" src="scripts/require.js"></script>
```

- main.js
```js
require(['./add'], function(addModule){
    console.log(addModule.add(1, 1));
});
```

- add.js
```js
define(function(){
    var add = function(x, y){
        return x + y;
    };

    return {
        add: add;
    };
})
```

所以引入模块需要require，定义模块内容需要define。

# AMD
AMD是RequireJS在推广过程中对模块定义的规范。

# sea.js
同样的工程，sea.js需要这样写。
- index.html
```html
<script src="scripts/sea.js"></script>
<script>
    sea.use("./scripts/main.js");
</script>
```
- main.js
```js
define(function(require, exports, module){
    // 需要时导入依赖的模块
    var addModule = require('./add');
    console.log(addModule.add(1, 1));
});
```
- add.js
```js
define(function(require, exports, module){
    var add = function(a, b){
        return a + b;
    };
    // 导出add函数
    module.exports = {
        add: add;
    };
});
```
# CMD
CMD是在SeaJS在推广过程中对模块定义的规范。
# AMD与CMD的区别
- 引入方式不同

AMD在定义模块时，所需的依赖必须一开始就写好。
```js
// AMD
require(['./add'], function(addModule){
    console.log(addModule.add(1, 1));
});
```
CMD则是需要时再require。
```js
// CMD
define(function(require, exports, module){
    var addModule = require('./add');
    console.log(addModule.add(1, 1));
})
```
- 加载的时机不同

AMD需要将需要的依赖先加载完再执行代码，而CMD则是在require的时候再加载依赖，加载完后执行。

# CommonJS
服务器端采用的是CommonJS规范。

- 导入模块
```js
var add = require('./add.js');
console(add.add(1, 1));
```
- 导出模块
```js
var add = function(a, b){
    return a + b;
}
module.exports.add = add;
```

# CommonJS与AMD
- CommonJS：同步，加载完才能执行后面操作。
- AMD：异步，允许指定回调函数。

基于服务器端和浏览器端的环境的特点，加载模块的方式：
- 服务器端：CommonJS
- 浏览器端：AMD

# ES6
- 导入模块
```js
import {one, two, three} from './file'
```
- 导出模块
```js
var one = 'hello';
var two = 'two';
var three = 'three';

export {one, two, three};
```

- html设置
```html
<!-- 其中，type="module"是必须要设置的。 -->
<script src="scripts/main.js" type="module">
```
# ES6与CommonJS
不同点：
- CommonJS模块输出的是一个值的拷贝，ES6输出的是值的引用；
- CommonJS模块是运行时加载，ES6是编译时输出接口。

# ES6转为ES5
- 首先使用Babel将ES6代码转为CommonJS代码；
- 再使用webpack将CommonJS代码转为原生的ES5代码。


本身内容基于[冴羽](https://github.com/mqyqingfeng/Blog/issues/108)，学习用